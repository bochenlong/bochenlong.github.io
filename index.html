<!doctype html>



  


<html class="theme-next muse use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />





  <link rel="alternate" href="/atom.xml" title="薄小破" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="唯有努力不负人！">
<meta property="og:type" content="website">
<meta property="og:title" content="薄小破">
<meta property="og:url" content="http://bochenlong.github.io/index.html">
<meta property="og:site_name" content="薄小破">
<meta property="og:description" content="唯有努力不负人！">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="薄小破">
<meta name="twitter:description" content="唯有努力不负人！">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>

  <title> 薄小破 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">薄小破</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">厚德载物</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="#" class="st-search-show-outputs">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <form class="site-search-form">
  <input type="text" id="st-search-input" class="st-search-input st-default-search-input" />
</form>

<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
    (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
    e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install', 'Fy2iX4qVjCz3b2XdrDNe','2.0.0');
</script>



    </div>
  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/26/Java8_Collector整理/" itemprop="url">
                  Java8_Collector整理
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-08-26T10:23:44+08:00" content="2016-08-26">
              2016-08-26
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index">
                    <span itemprop="name">Java</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/08/26/Java8_Collector整理/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/08/26/Java8_Collector整理/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2016/08/26/Java8_Collector整理/" class="leancloud_visitors" data-flag-title="Java8_Collector整理">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h3 id="收集器"><a href="#收集器" class="headerlink" title="收集器"></a>收集器</h3><p>Stream中的collect可以将流中的元素累积成一个汇总结果，使用收集器可以简洁而灵活地定义collect用来生成结果集合的标准。更具体的来说，对流调用collect方法将对流中的元素触发一个归约操作，由Collector来参数化。一般来说，Collector会对元素应用一个转换函数（很多时候是不体现任何效果的恒等转换，例如toList()），并将结果累积在一个数据结构中，从而产生这一过程的最终输出。<br>Collector主要提供3大功能：   </p>
<ul>
<li>将流元素归约和汇总成为一个值   </li>
<li>元素分组   </li>
<li>元素分区   </li>
</ul>
<h3 id="元素归约和汇总"><a href="#元素归约和汇总" class="headerlink" title="元素归约和汇总"></a>元素归约和汇总</h3><h4 id="toList"><a href="#toList" class="headerlink" title="toList"></a>toList</h4><p><em>toList把流中的项目收集到一个List</em><br>使用示例获取菜单的全部列表：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">menu.stream().map(Dish::getName).collect(Collectors.toList());</span><br></pre></td></tr></table></figure></p>
          <div class="post-more-link text-center">
            <a class="btn" href="/2016/08/26/Java8_Collector整理/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/21/Java8_Stream整理/" itemprop="url">
                  Java8_Stream整理
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-08-21T11:10:22+08:00" content="2016-08-21">
              2016-08-21
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index">
                    <span itemprop="name">Java</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/08/21/Java8_Stream整理/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/08/21/Java8_Stream整理/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2016/08/21/Java8_Stream整理/" class="leancloud_visitors" data-flag-title="Java8_Stream整理">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="Java8-Stream"><a href="#Java8-Stream" class="headerlink" title="Java8-Stream"></a>Java8-Stream</h3><p>流是Java8 API的新成员，它允许你以声明方式处理数据集合，你可以把它看成遍历数据集的高级迭代器；此外，流还可以透明地的并行处理，让你的代码性能更好。</p>
<h3 id="构建流"><a href="#构建流" class="headerlink" title="构建流"></a>构建流</h3><ol>
<li><p>由值创建流<br>使用静态方法Stream.of，通过显式创建一个流。它可以接受任意数量的参数。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Stream&lt;String&gt; stream = Stream.of(&quot;java8&quot;,&quot;name&quot;,&quot;passWord&quot;);</span><br></pre></td></tr></table></figure>
</li>
<li><p>由数组创建流</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">int[] numbers = new int[]&#123;1,2,6,4,8,3,10&#125;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>由文件生成流</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">try (Stream&lt;String&gt; lines = Files.lines(Paths.get(&quot;Test.java&quot;), Charset.defaultCharset())) &#123;</span><br><span class="line"></span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>由函数生成流：创建无线流<br>Stream API提供了两个静态方法来从函数生成流：Stream.iterate和Stream.generate。这两个操作可以创建所谓的无限流。一般来说应该使用limit(n)对这种流加以限制。</p>
<ol>
<li><p>迭代</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Stream&lt;Integer&gt; stream = Stream.iterate(0,n-&gt;n+2).limit(10);</span><br></pre></td></tr></table></figure>
</li>
<li><p>生成</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Stream&lt;Double&gt; stream = Stream.generate(Math::random).limit(10);</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>相比较而言，interate是依次生成一系列值，生成的时候依赖于前值；比如例子中的生成偶数，每次计算对上一个值应用相加函数；而generate不是依次对每个新生成的值应用函数，它接受一个函数Supplier<t>产生新的值（Supplier<t>产生一个对象）。</t></t></p>
</li>
<li><p>数值流特有的生成一定范围数值的流</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">IntStream stream = IntStream.range(1,100);</span><br><span class="line">IntStream stream = IntStream.rangeClose(1,100);</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>这两个方法都接收起始值，但range不接收尾值，而rangeClose接收尾值。</p>
<h3 id="流操作"><a href="#流操作" class="headerlink" title="流操作"></a>流操作</h3><p>有了数据流，我们可以对流进行各种操作；操作前，你需要了解些Lambda和方法引用的内容。</p>
<h4 id="Lambda"><a href="#Lambda" class="headerlink" title="Lambda"></a>Lambda</h4><p>Lambda表达式有三个部分：</p>
<ul>
<li>参数列表</li>
<li>箭头</li>
<li>Lambda主体</li>
</ul>
<p>Lambda表达式实际上表达了函数式接口（只定义一个抽象方法的接口，Java8中为了更好的辨别此类接口使用了@FunctionalInterface的注解）的一个实例，相比匿名类来说，更简单更高效。<br>比如我们启动一个线程<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">new Thread(() -&gt; System.out.println(&quot;Hello World&quot;)).start();</span><br></pre></td></tr></table></figure></p>
<p>Thread接收一个Runnable的实例，这里简单的写成了<code>() -&gt; System.out.println(&quot;Hello World&quot;)</code>,这个Lambda表达式就表达了一个Runnable的实例，事实上<code>Runnable r = ()-&gt;System.out.println(&quot;Hello World&quot;);</code>,两者是相等的。</p>
<p>注意：Lambda表达式的签名要和函数式接口的抽象方法签名一致</p>
<h4 id="方法引用"><a href="#方法引用" class="headerlink" title="方法引用"></a>方法引用</h4><p>方法引用可以让你重复使用现有的方法定义，并像Lambda一样传递它们；方法引用可以被看做仅仅调用特定方法的Lambda的一种快捷键写法。如果一个Lambda代表的只是“直接调用这个方法”，那最好还是用名称来调用它。<br>比如上面的示例改成<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">new Thread(() -&gt; System.out::println).start();</span><br></pre></td></tr></table></figure></p>
<p>但是输出为空；常见的对象比较、对象转化我们都可以用这种方式来简化书写；下面的示例会有具体体现。</p>
<h4 id="中间操作"><a href="#中间操作" class="headerlink" title="中间操作"></a>中间操作</h4><p>中间操作，是对流的操作处理，产生的也为一个流；重要的是如果流没有触发中断操作，中间操作不会执行任何处理。为了更好的演示，下面我们创建一个类，以便于具体场景下解释<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">class Dish &#123;</span><br><span class="line">        private final String name;// 名称</span><br><span class="line">        private final boolean vegetarian;// 是否素食</span><br><span class="line">        private final int calories;// 热量</span><br><span class="line">        private final Type type;// 类型（肉、鱼、其他）</span><br><span class="line"></span><br><span class="line">        public Dish(String name, boolean vegetarian, int calories, Type type) &#123;</span><br><span class="line">            this.name = name;</span><br><span class="line">            this.vegetarian = vegetarian;</span><br><span class="line">            this.calories = calories;</span><br><span class="line">            this.type = type;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public String getName() &#123;</span><br><span class="line">            return name;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public boolean isVegetarian() &#123;</span><br><span class="line">            return vegetarian;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public int getCalories() &#123;</span><br><span class="line">            return calories;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public Type getType() &#123;</span><br><span class="line">            return type;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public enum Type &#123;MEAT, FISH, OTHER&#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p>
<p>创建一个菜单<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Dish&gt; menu = Arrays.asList(</span><br><span class="line">                new Dish(&quot;duck&quot;, false, 800, Dish.Type.MEAT),// 鸭肉</span><br><span class="line">                new Dish(&quot;beef&quot;, false, 700, Dish.Type.MEAT),// 牛肉</span><br><span class="line">                new Dish(&quot;chicken&quot;, false, 400, Dish.Type.MEAT),// 鸡肉</span><br><span class="line">                new Dish(&quot;french fries&quot;, true, 530, Dish.Type.OTHER),// 炸薯条</span><br><span class="line">                new Dish(&quot;rice&quot;, true, 350, Dish.Type.OTHER),// 米</span><br><span class="line">                new Dish(&quot;season fruit&quot;, true, 120, Dish.Type.OTHER),// 季节水果</span><br><span class="line">                new Dish(&quot;pizza&quot;, true, 550, Dish.Type.OTHER),// 比萨饼</span><br><span class="line">                new Dish(&quot;prawns&quot;, false, 300, Dish.Type.FISH),// 虾</span><br><span class="line">                new Dish(&quot;salmon&quot;, false, 450, Dish.Type.FISH)// 鲑鱼</span><br><span class="line">        );</span><br></pre></td></tr></table></figure></p>
<h5 id="filter"><a href="#filter" class="headerlink" title="filter"></a>filter</h5><p>该操作接受一个谓词（一个返回boolean的函数）作为参数，并返回一个包含所有符合谓词的元素的流。<br>比如获取素食<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Stream&lt;Dish&gt; stream = menu.stream().filter(Dish::isVegetarian);</span><br></pre></td></tr></table></figure></p>
<p>这里<code>Dish::isVegetarian</code>就是Lambda<code>a -&gt; a.isVegetarian()</code>的简写，<code>a</code>由Java的类型推导会自动识别为<code>Dish</code>类型。</p>
<h5 id="distinct"><a href="#distinct" class="headerlink" title="distinct"></a>distinct</h5><p>该操作会返回一个元素各异（根据流所生成元素的hashCode/equals方法实现）的流。<br>比如下面获取不重复的数值流<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">IntStream intStream =IntStream.of(1,2,1,2,4,5,6).distinct();</span><br></pre></td></tr></table></figure></p>
<h5 id="skip"><a href="#skip" class="headerlink" title="skip"></a>skip</h5><p>该操作返回一个扔掉了前n个元素的流<br>比如菜单中出去前两个的菜品<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Stream&lt;Dish&gt; stream = menu.stream().skip(2);</span><br></pre></td></tr></table></figure></p>
<h5 id="limit"><a href="#limit" class="headerlink" title="limit"></a>limit</h5><p>该操作会返回一个不超过给定长度的流。<br>比如前5个菜品<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Stream&lt;Dish&gt; stream = menu.stream().limit(5);</span><br></pre></td></tr></table></figure></p>
<h5 id="map"><a href="#map" class="headerlink" title="map"></a>map</h5><p>映射操作，即流接受一个函数作为参数，这个函数会应用到每个元素上，并将其映射成一个新的元素。<br>比如获取全部的菜名流<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Stream&lt;String&gt; stream = menu.stream().map(Dish::getName);</span><br></pre></td></tr></table></figure></p>
<h5 id="flatMap"><a href="#flatMap" class="headerlink" title="flatMap"></a>flatMap</h5><p>此方法把一个流中的每个值都换成另一个流，然后把所有的流链接起来成为一个流。<br>比如获取字符串数组的全部字母流<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Arrays.stream(new String[]&#123;&quot;abc&quot;,&quot;defg&quot;&#125;).map(a-&gt;a.split(&quot;&quot;));</span><br></pre></td></tr></table></figure></p>
<p>此操作将每个元素进行<code>sprit</code>操作获取到Stream<string[]>，要想获取Stream<string>则需要进一步转换<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Stream&lt;String&gt; stringStream = Arrays.stream(new String[]&#123;&quot;abc&quot;,&quot;defg&quot;&#125;).map(a-&gt;a.split(&quot;&quot;)).flatMap(Arrays::stream);</span><br></pre></td></tr></table></figure></string></string[]></p>
<h5 id="sorted"><a href="#sorted" class="headerlink" title="sorted"></a>sorted</h5><p>此方法可以将流按照一定的规则进行元素排列，参数为空时按照对象的默认比较器进行排序，同时你也可以传入自定义的比较器来定制排序规则。<br>比如按照热量对菜品进行排序<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Stream&lt;Dish&gt; stream = menu.stream().sorted((a,b)-&gt; a.getCalories()&gt;b.getCalories()?1:0);</span><br></pre></td></tr></table></figure></p>
<p>也可以简写为<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Stream&lt;Dish&gt; stream = menu.stream().sorted(Comparator.comparing(Dish::getCalories));</span><br></pre></td></tr></table></figure></p>
<h4 id="终端操作"><a href="#终端操作" class="headerlink" title="终端操作"></a>终端操作</h4><p>终端操作消费一个流，获取一个具体的对象结果。</p>
<h5 id="anyMatch-noneMatch-allMatch"><a href="#anyMatch-noneMatch-allMatch" class="headerlink" title="anyMatch/noneMatch/allMatch"></a>anyMatch/noneMatch/allMatch</h5><p>此三个方法为判断流中元素是否匹配给定的谓词，返回一个boolean值：anyMathch任意匹配；noneMathch全不匹配;allMathch都匹配。<br>如下是否有素食<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">boolean flag = menu.stream().anyMatch(Dish::isVegetarian);</span><br></pre></td></tr></table></figure></p>
<h5 id="findAny-findFirst"><a href="#findAny-findFirst" class="headerlink" title="findAny/findFirst"></a>findAny/findFirst</h5><p>返回当前流的任意/第一个元素，返回一个<code>Optional&lt;T&gt;</code>对象<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Optional optional = menu.stream().findFirst();</span><br></pre></td></tr></table></figure></p>
<p><code>Otpional&lt;T&gt;</code>类是一个容器类，代表一个值存在或者不存在；Java8引入<code>Optional&lt;T&gt;</code>，这样就不会出现NUll的问题了，比如上面如果菜单为空，如何获取第一个元素。<br><code>Optional&lt;T&gt;</code>提供了以下方法让你处理值不存在的情形：</p>
<ul>
<li><code>isPresent()</code>将在<code>Optaional</code>包含值的时候返回为true否则false</li>
<li><code>isPresent(Consumer&lt;T&gt; block)</code>会在值存在的时候指定给定代码</li>
<li><code>T get()</code>会在值存在时返回值，否则抛出NoSuchElement异常</li>
<li><code>T orElseGet(Object other)</code>会在值不存在时返回一个默认值</li>
<li><code>T orElseGet(Supplier other)</code>会在值不存在时生成一个默认值</li>
</ul>
<h5 id="foreach"><a href="#foreach" class="headerlink" title="foreach"></a>foreach</h5><p>此方法对流中的每个元素应用一个<code>Comsumer&lt;T&gt;</code>的函数，返回一个void类型；常常我们用来输出。<br>如下打印全部的菜单名称<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">menu.stream().forEach(a -&gt; System.out.println(a.getName()));</span><br></pre></td></tr></table></figure></p>
<h5 id="collect"><a href="#collect" class="headerlink" title="collect"></a>collect</h5><p>将流 转换成其他形式，你可以把collect看做能够接受各种方案作为参数，并将流中的元素累积成一个汇总结果的操作。<br>比如将全部菜品收集到List中<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">menu.stream().map(Dish::getName).collect(Collectors.toList());</span><br></pre></td></tr></table></figure></p>
<p>collect实际上也是一种归约操作，接收Collecttors参数可以实现更高级的汇总，比如实现菜单按照素食非素质归类，按照热量范畴归类等等。见 <a href="">Java8-Collectors</a></p>
<h5 id="reduce"><a href="#reduce" class="headerlink" title="reduce"></a>reduce</h5><p>reduce即归约操作，用来表达更复杂的查询，比如“计算菜单中的总热量”<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">menu.stream().map(Dish::getCalories).reduce(0,Integer::sum);</span><br></pre></td></tr></table></figure></p>
<p>reduce接收两个参数：<br>1 一个初始值<br>2 一个<code>BinaryOperator&lt;T&gt;</code>来将两个元素结合起来产生一个新值，这里我们使用的是lambda (a,b) -&gt; a+b，用方法引用简写了；<br>reduce还有一个变体，不接收初始值，返回一个<code>Optional</code>对象，如<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">menu.stream().map(Dish::getCalories).reduce(Integer::sum);</span><br></pre></td></tr></table></figure></p>
<p>但是这种写法有性能问题，它有一个暗含的装箱成本，每个Integer必须拆分成一个原始类型再进行求和。Stream API提供了原始类型流特化来专门支持处理数值流的方法。见下。</p>
<h5 id="原始类型特化"><a href="#原始类型特化" class="headerlink" title="原始类型特化"></a>原始类型特化</h5><p>Java8提供了3个原始类型流接口：IntStream/DoubleStream/LongStream，分别将流中的元素特化为int/long/double，从而避免暗含的装箱成本。每个接口都提供了常用的规约方法，比如max/sum/min等。<br>比如上面实例可以写成<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">menu.stream().mapToInt(Dish::getCalories).sum();</span><br></pre></td></tr></table></figure></p>
<p>注意：sum的默认值为0，如果为max()操作的话，将返回<code>OptionalInt</code>。</p>
<p>如果要将数值流转换回对象流，则需要<code>box()</code>操作，比如<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Stream&lt;Integer&gt; stream = menu.stream().mapToInt(Dish::getCalories).boxed();</span><br></pre></td></tr></table></figure></p>
<h5 id="count"><a href="#count" class="headerlink" title="count"></a>count</h5><p>count即计数，计算流中元素的数量；实际上通过转化LongStream进行reduce操作获取的。<br>比如计算菜品总数<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">menu.stream().count();</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/06/17/MongoDB学习笔记03【进阶】/" itemprop="url">
                  MongoDB学习笔记03【进阶】
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-06-17T09:42:53+08:00" content="2016-06-17">
              2016-06-17
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/NoSql/" itemprop="url" rel="index">
                    <span itemprop="name">NoSql</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/06/17/MongoDB学习笔记03【进阶】/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/06/17/MongoDB学习笔记03【进阶】/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2016/06/17/MongoDB学习笔记03【进阶】/" class="leancloud_visitors" data-flag-title="MongoDB学习笔记03【进阶】">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h3 id="MongoDB索引"><a href="#MongoDB索引" class="headerlink" title="MongoDB索引"></a>MongoDB索引</h3><p>索引通常能够极大的提高查询的效率，如果没有索引，MongoDB在读取数据时必须扫描集合中的每个文件并选取那些符合查询条件的记录。索引是特殊的数据结构，索引存储在一个易于遍历读取的数据集合中，索引是对数据库表中一列或多列的值进行排序的一种结构。</p>
<h4 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h4><p><code>db.COLLECTION_NAME.ensureIndex({KEY:1,...})</code></p>
<blockquote>
<p>语法中KEY值为你要创建的索引字段，1为指定按升序创建索引，-1为按降序。</p>
</blockquote>
<p>ensureIndex()接收可选参数，参见列表：<br>
          <div class="post-more-link text-center">
            <a class="btn" href="/2016/06/17/MongoDB学习笔记03【进阶】/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/06/16/MongoDB学习笔记02【基础知识】/" itemprop="url">
                  MongoDB学习笔记02【基础知识】
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-06-16T10:25:58+08:00" content="2016-06-16">
              2016-06-16
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/NoSql/" itemprop="url" rel="index">
                    <span itemprop="name">NoSql</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/06/16/MongoDB学习笔记02【基础知识】/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/06/16/MongoDB学习笔记02【基础知识】/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2016/06/16/MongoDB学习笔记02【基础知识】/" class="leancloud_visitors" data-flag-title="MongoDB学习笔记02【基础知识】">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>在MongoDB中基本的概念是文档、集合、数据库，下图与RDBMS对比，比较容易理解。</p>
<table>
<thead>
<tr>
<th>SQL术语</th>
<th>MongoDB术语</th>
<th>解释</th>
</tr>
</thead>
<tbody>
<tr>
<td>database</td>
<td>database</td>
<td>数据库</td>
</tr>
<tr>
<td>table</td>
<td>collection</td>
<td>数据库表/集合</td>
</tr>
<tr>
<td>row</td>
<td>document</td>
<td>数据记录行/文档</td>
</tr>
<tr>
<td>column</td>
<td>field</td>
<td>数据字段/域</td>
</tr>
<tr>
<td>index</td>
<td>index</td>
<td>索引</td>
</tr>
<tr>
<td>table</td>
<td>joins</td>
<td>表连接,MongoDB不支持</td>
</tr>
<tr>
<td>primary key</td>
<td>primary key</td>
<td>主键,MongoDB自动将_id字段设置为主键</td>
</tr>
</tbody>
</table>
<h3 id="数据库DataBase"><a href="#数据库DataBase" class="headerlink" title="数据库DataBase"></a>数据库DataBase</h3><p>一个MongoDB可以建多个数据库。MongoDB的默认数据库为”db”,即启动时前创建的”/data/db”目录。</p>
<h4 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h4><ul>
<li>查看数据库 <code>show dbs</code><blockquote>
<p>如果数据库为空，则不会显示</p>
</blockquote>
</li>
<li>显示当前数据库对象 <code>db</code></li>
<li>切换/创建数据库 <code>use local</code></li>
<li>删除数据库 <code>db.dropDatabase()</code></li>
</ul>
          <div class="post-more-link text-center">
            <a class="btn" href="/2016/06/16/MongoDB学习笔记02【基础知识】/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/06/16/MongoDB学习笔记01【搭建环境】/" itemprop="url">
                  MongoDB学习笔记01【搭建环境】
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-06-16T09:35:11+08:00" content="2016-06-16">
              2016-06-16
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/NoSql/" itemprop="url" rel="index">
                    <span itemprop="name">NoSql</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/06/16/MongoDB学习笔记01【搭建环境】/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/06/16/MongoDB学习笔记01【搭建环境】/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2016/06/16/MongoDB学习笔记01【搭建环境】/" class="leancloud_visitors" data-flag-title="MongoDB学习笔记01【搭建环境】">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h3 id="MongoDB简介"><a href="#MongoDB简介" class="headerlink" title="MongoDB简介"></a>MongoDB简介</h3><p>MongoDB 是由C++语言编写的，是一个基于分布式文件存储的开源数据库系统。MongoDB 将数据存储为一个文档，数据结构由键值(key=&gt;value)对组成。MongoDB 文档类似于 JSON 对象。字段值可以包含其他文档，数组及文档数组。</p>
<h3 id="MongoDB特点"><a href="#MongoDB特点" class="headerlink" title="MongoDB特点"></a>MongoDB特点</h3><ul>
<li>MongoDB的提供了一个面向文档存储，操作起来比较简单和容易。</li>
<li>你可以在MongoDB记录中设置任何属性的索引 (如：FirstName=”Sameer”,Address=”8 Gandhi Road”)来实现更快的排序。</li>
<li>你可以通过本地或者网络创建数据镜像，这使得MongoDB有更强的扩展性。</li>
<li>如果负载的增加（需要更多的存储空间和更强的处理能力） ，它可以分布在计算机网络中的其他节点上这就是所谓的分片。</li>
<li>Mongo支持丰富的查询表达式。查询指令使用JSON形式的标记，可轻易查询文档中内嵌的对象及数组。</li>
<li>MongoDb 使用update()命令可以实现替换完成的文档（数据）或者一些指定的数据字段 。</li>
<li>Mongodb中的Map/reduce主要是用来对数据进行批量处理和聚合操作。</li>
<li>Map和Reduce。Map函数调用emit(key,value)遍历集合中所有的记录，将key与value传给Reduce函数进行处理。</li>
<li>Map函数和Reduce函数是使用Javascript编写的，并可以通过db.runCommand或mapreduce命令来执行MapReduce操作。</li>
<li>GridFS是MongoDB中的一个内置功能，可以用于存放大量小文件。</li>
<li>MongoDB允许在服务端执行脚本，可以用Javascript编写某个函数，直接在服务端执行，也可以把函数的定义存储在服务端，下次直接调用即可。</li>
<li>MongoDB支持各种编程语言:RUBY，PYTHON，JAVA，C++，PHP，C#等多种语言。</li>
<li>MongoDB安装简单。</li>
</ul>
<h3 id="MongoDB安装"><a href="#MongoDB安装" class="headerlink" title="MongoDB安装"></a>MongoDB安装</h3><h4 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h4><p><em>系统环境</em> <code>CentOS release 6.6 (Final)</code><br>
          <div class="post-more-link text-center">
            <a class="btn" href="/2016/06/16/MongoDB学习笔记01【搭建环境】/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/06/04/Reactor模式/" itemprop="url">
                  Reactor模式
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-06-04T18:45:24+08:00" content="2016-06-04">
              2016-06-04
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Design-Pattern/" itemprop="url" rel="index">
                    <span itemprop="name">Design Pattern</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/06/04/Reactor模式/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/06/04/Reactor模式/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2016/06/04/Reactor模式/" class="leancloud_visitors" data-flag-title="Reactor模式">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p><a href="http://www.blogjava.net/DLevin/archive/2015/09/02/427045.html">转载 http://www.blogjava.net/DLevin/archive/2015/09/02/427045.html</a></p>
<h3 id="什么是Reactor模式"><a href="#什么是Reactor模式" class="headerlink" title="什么是Reactor模式"></a>什么是Reactor模式</h3><p>要回答这个问题，首先当然是求助Google或Wikipedia，其中Wikipedia上说：“The reactor design pattern is an event handling pattern for handling service requests delivered concurrently by one or more inputs. The service handler then demultiplexes the incoming requests and dispatches them synchronously to associated request handlers.”。从这个描述中，我们知道Reactor模式首先是事件驱动的，有一个或多个并发输入源，有一个Service Handler，有多个Request Handlers；这个Service Handler会同步的将输入的请求（Event）多路复用的分发给相应的Request Handler。如果用图来表达：<br><img src="http://i.imgur.com/jIKK929.png" alt=""> </p>
<p>从结构上，这有点类似生产者消费者模式，即有一个或多个生产者将事件放入一个Queue中，而一个或多个消费者主动的从这个Queue中Poll事件来处理；而Reactor模式则并没有Queue来做缓冲，每当一个Event输入到Service Handler之后，该Service Handler会主动的根据不同的Event类型将其分发给对应的Request Handler来处理。<br>
          <div class="post-more-link text-center">
            <a class="btn" href="/2016/06/04/Reactor模式/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/24/Redis配置文件示例/" itemprop="url">
                  Redis配置文件示例
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-05-24T12:48:25+08:00" content="2016-05-24">
              2016-05-24
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/NoSql/" itemprop="url" rel="index">
                    <span itemprop="name">NoSql</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/05/24/Redis配置文件示例/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/05/24/Redis配置文件示例/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2016/05/24/Redis配置文件示例/" class="leancloud_visitors" data-flag-title="Redis配置文件示例">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"># Redis 配置文件示例</span><br><span class="line">#</span><br><span class="line"># 为了加载配置，Redis必须以配置文件作为第一参数启动。</span><br><span class="line"># ./redis-server /path/to/redis.conf</span><br><span class="line"></span><br><span class="line"># 当你需要配置内存大小的时候，必须要带上单位，</span><br><span class="line"># 通常的格式就是 1k 5gb 4M 等酱紫：</span><br><span class="line">#</span><br><span class="line"># 1k =&gt; 1000 bytes</span><br><span class="line"># 1kb =&gt; 1024 bytes</span><br><span class="line"># 1m =&gt; 1000000 bytes</span><br><span class="line"># 1mb =&gt; 1024*1024 bytes</span><br><span class="line"># 1g =&gt; 1000000000 bytes</span><br><span class="line"># 1gb =&gt; 1024*1024*1024 bytes</span><br><span class="line">#</span><br><span class="line"># 单位不区分大小写，你写1GB 1Gb 1gB 是一样的的。</span><br><span class="line"></span><br><span class="line">################################## INCLUDES ###################################</span><br><span class="line"></span><br><span class="line"># 假如说你有一个可用于所有的 redis server 的标准配置模板，</span><br><span class="line"># 但针对某些 server 又需要一些个性化的设置，</span><br><span class="line"># 你可以使用 include 来包含一些其他的配置文件，这对你来说是非常有用的。</span><br><span class="line">#</span><br><span class="line"># 但是要注意哦，include 是不能被 config rewrite 命令改写的</span><br><span class="line"># 由于 redis 总是以最后的加工线作为一个配置指令值，所以你最好是把 include 放在这个文件的最前面，</span><br><span class="line"># 以避免在运行时覆盖配置的改变，相反，你就把它放在后面（其实就是你把标准模板放在前面，需要特殊配置的写在后面会覆盖标准配置）。</span><br><span class="line">#</span><br><span class="line"># include /path/to/local.conf</span><br><span class="line"># include /path/to/other.conf</span><br><span class="line"></span><br><span class="line">################################## NETWORK #####################################</span><br><span class="line"></span><br><span class="line"># 默认情况下，redis 在 server 上所有有效的网络接口上监听客户端连接。</span><br><span class="line"># 你如果只想让它在一个或者多个网络接口上监听，那你就绑定一个IP或者多个IP。</span><br><span class="line">#</span><br><span class="line"># 示例，多个IP用空格隔开:</span><br><span class="line">#</span><br><span class="line"># bind 192.168.1.100 10.0.0.1</span><br><span class="line"># bind 127.0.0.1 ::1</span><br><span class="line">#</span><br><span class="line">bind 127.0.0.1</span><br><span class="line"></span><br><span class="line"># 保护模式防止 redis 实例被网络操作恶意关闭。</span><br><span class="line"># </span><br><span class="line"># 当保护模式开启时，而且：</span><br><span class="line">#       1）redis 监听全部的网络接口</span><br><span class="line">#       2）没有配置密码验证</span><br><span class="line">#  </span><br><span class="line"># 时，redis 服务器只接受本地（127.0.0.1 and ::1）或者是Unix实例的socket链接。</span><br><span class="line">#</span><br><span class="line"># 默认情况下，保护模式是开启的，除非你确定你接受其他的客户端链接，即使这些链接没有密码验证、指定网络接口时才关闭。</span><br><span class="line">protected-mode yes</span><br></pre></td></tr></table></figure>
          <div class="post-more-link text-center">
            <a class="btn" href="/2016/05/24/Redis配置文件示例/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/19/Java类加载梳理/" itemprop="url">
                  Java类加载器梳理
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-05-19T20:22:10+08:00" content="2016-05-19">
              2016-05-19
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index">
                    <span itemprop="name">Java</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/05/19/Java类加载梳理/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/05/19/Java类加载梳理/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2016/05/19/Java类加载梳理/" class="leancloud_visitors" data-flag-title="Java类加载器梳理">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h3 id="什么是类加载器"><a href="#什么是类加载器" class="headerlink" title="什么是类加载器"></a>什么是类加载器</h3><blockquote>
<p>虚拟机设计团队把类加载阶段中的“通过一个类的全限定名来获取描述此类的二进制字节流”这个动作放到虚拟机外部去实现，以便让应用程序自己决定如何去获取所需要的类。实现这个动作的代码模块成为“类加载器”。</p>
</blockquote>
<p>简单的讲，类加载器就是Java程序在运行时动态加载class文件到内存中的模块。类加载器是Java语言的一项创新，在类层次划分、OSGi、热部署、代码加密等领域都有着极其重要的应用。</p>
<h3 id="Java默认的类加载器"><a href="#Java默认的类加载器" class="headerlink" title="Java默认的类加载器"></a>Java默认的类加载器</h3><ul>
<li>启动类加载器（Bootstrap ClassLoader):这个类加载器负责将存放在<strong><JAVA_HOME>\lib目录中，或者被-Xbootclasspath参数所指定的路径</strong>中的，并且是虚拟机识别的（仅按照文件名称识别，如rt.jar,名字不符合的类库即使放在lib目录中也不会被加载）类库加载到虚拟机内存中。启动类加载器无法被Java程序直接引用，这个类加载器使用C++实现，是虚拟机自身的一部分。比如打包dmeo.jar，含类到</li>
<li>扩展类加载器（Extension ClassLoader）：这个加载器由sun.misc.Luncher$ExtClassLoader实现，它负责加载<strong><JAVA_HOME>\lib\ext目录中的，或者被java.ext.dirs系统变量所指定的路径</strong>中的所有类库，开发者可以直接使用扩展类加载器。</li>
<li>应用程序类加载器（Applicaition ClassLoader）：这个类加载器是ClassLoader中的getSystemClassLoader()方法的返回值，也成为系统类加载器。它负责加载用户<strong>类路径（ClassPath）</strong>上所指定的类库，开发者可以直接使用这个类加载器，如果应用中没有自定义过自己的类加载器，一般情况下这个就是程序中默认的类加载器。</li>
</ul>
          <div class="post-more-link text-center">
            <a class="btn" href="/2016/05/19/Java类加载梳理/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/15/Git命令拾遗/" itemprop="url">
                  Git学习笔记 - 命令拾遗
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-05-15T23:10:04+08:00" content="2016-05-15">
              2016-05-15
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Git/" itemprop="url" rel="index">
                    <span itemprop="name">Git</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/05/15/Git命令拾遗/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/05/15/Git命令拾遗/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2016/05/15/Git命令拾遗/" class="leancloud_visitors" data-flag-title="Git学习笔记 - 命令拾遗">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <blockquote>
<p>查看Git版本   </p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~ git --version</span><br></pre></td></tr></table></figure>
<blockquote>
<p>初始化仓库   </p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~ git init</span><br></pre></td></tr></table></figure>
<blockquote>
<p>远程仓库   </p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">~ git remote -v</span><br><span class="line">~ git remote add origin git@github.com:bochenlong/study-demo.git</span><br><span class="line">~ git remote remove origin // 取消关联</span><br></pre></td></tr></table></figure>
<blockquote>
<p>提交到暂存区   </p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">~ git add 1.txt ...</span><br><span class="line">~ git add ./</span><br></pre></td></tr></table></figure>
<blockquote>
<p>提交到版本库</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">~ git commit -m &quot;add the README.md&quot;</span><br><span class="line">~ git commit ./1.txt -m &quot;modify 1.txt&quot;</span><br><span class="line">~ git commit ./ -m &quot;modify 1.txt&quot;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>查看仓库当前状态</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~ git status</span><br></pre></td></tr></table></figure>
<blockquote>
<p>对比文件</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~ git diff 1.txt</span><br></pre></td></tr></table></figure>
          <div class="post-more-link text-center">
            <a class="btn" href="/2016/05/15/Git命令拾遗/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/15/Github+Hexo搭建个人博客/" itemprop="url">
                  Github+Hexo搭建个人博客
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-05-15T23:10:04+08:00" content="2016-05-15">
              2016-05-15
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/05/15/Github+Hexo搭建个人博客/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/05/15/Github+Hexo搭建个人博客/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2016/05/15/Github+Hexo搭建个人博客/" class="leancloud_visitors" data-flag-title="Github+Hexo搭建个人博客">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>想搭建个人博客，Github+Hexo是个不错的选择。</p>
<h3 id="为什么选择Github-Hexo"><a href="#为什么选择Github-Hexo" class="headerlink" title="为什么选择Github+Hexo"></a>为什么选择Github+Hexo</h3><ul>
<li>Git - 最先进的开源分布式版本控制系统</li>
<li><p>GitHub - 全球最大的社交编程及代码托管网站</p>
<ul>
<li>Github Pages - Github提供的<strong>免费</strong>的静态站点，Github pages具备两种模式：<br>  1 User/Organization Pages个人或公司站点<br>  2 Project Pages项目站点</li>
</ul>
</li>
<li><p>Hexo快速、简洁且高效的博客框架 </p>
<ul>
<li>急速生成页面</li>
<li>支持Markdown</li>
<li>一键部署博客</li>
<li>丰富的插件、主题支持</li>
</ul>
</li>
</ul>
<h3 id="创建Github-Pages"><a href="#创建Github-Pages" class="headerlink" title="创建Github Pages"></a>创建Github Pages</h3><ol>
<li>Github网站注册账号</li>
<li>创建仓库username.github.io   </li>
</ol>
<blockquote>
<p>需要注意，新建仓库名称必须符合标准要求，username为Github账号的用户名称，建立成功之后，Github会自动将识别此仓库为Github Pages站点</p>
</blockquote>
<h3 id="创建博客"><a href="#创建博客" class="headerlink" title="创建博客"></a>创建博客</h3><blockquote>
<p>以下为Mac环境操作记录，个别安装请根据自己系统调整</p>
</blockquote>
<h4 id="Hexo安装"><a href="#Hexo安装" class="headerlink" title="Hexo安装"></a>Hexo安装</h4><ul>
<li><p>安装依赖软件</p>
<ul>
<li><p>Node.js ( 含npm )</p>
<p>  <code>$ brew install node</code></p>
</li>
<li><p>Git</p>
<p>  <code>$ brew install git</code></p>
</li>
</ul>
</li>
<li><p>安装Hexo   </p>
<p>  <code>$ sudo npm install hexo-cli -g</code>    </p>
<blockquote>
<p>Linux / OS X 系统下需要 sudo 管理员安装，否则会出现以下错误。如果出现可以尝试 <strong>npm install hexo –no-optional</strong> 安装解决。但此错误并不影响Hexo正常使用。</p>
</blockquote>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123; [Error: Cannot find module &apos;./build/Release/DTraceProviderBindings&apos;] code: &apos;MODULE_NOT_FOUND&apos; &#125;    </span><br><span class="line">&#123; [Error: Cannot find module &apos;./build/default/DTraceProviderBindings&apos;] code: &apos;MODULE_NOT_FOUND&apos; &#125;</span><br><span class="line">&#123; [Error: Cannot find module &apos;./build/Debug/DTraceProviderBindings&apos;] code: &apos;MODULE_NOT_FOUND&apos; &#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
          <div class="post-more-link text-center">
            <a class="btn" href="/2016/05/15/Github+Hexo搭建个人博客/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.png"
               alt="bochenlong" />
          <p class="site-author-name" itemprop="name">bochenlong</p>
          <p class="site-description motion-element" itemprop="description">唯有努力不负人！</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">11</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">4</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">12</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/bochenlong" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-inline">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              博客收藏
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="http://tech.meituan.com/" title="美团点评技术团队" target="_blank">美团点评技术团队</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://jm.taobao.org/" title="阿里中间件团队" target="_blank">阿里中间件团队</a>
                </li>
              
            </ul>
          </div>
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2015 - 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">bochenlong</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  



  

    <script type="text/javascript">
      var disqus_shortname = 'bochenlong';
      var disqus_identifier = 'index.html';
      var disqus_title = '';
      var disqus_url = '';

      function run_disqus_script(disqus_script){
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      }

      run_disqus_script('count.js');
      
    </script>
  



  
  
  

  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
  <script>AV.initialize("5BxSUBR0QY0PIUoEKmjEw61z-gzGzoHsz", "BltEGEoQiLNyx3Dn2sW5EgdF");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

</body>
</html>
